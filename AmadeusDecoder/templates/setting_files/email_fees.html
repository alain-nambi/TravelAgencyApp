    
{% if state_email_fee == "incomplet" %}
    <div class="" style="margin-bottom:1rem;">
        <a class="btn btn-outline-primary  py-0 px-2" title="Ajouter une ligne" role="button" onclick="OpenCard('add-email-fee-card')">
            <i class="fa fa-pen" aria-hidden="true"></i>Ajouter une ligne</a>
    </div>
{% endif %}
    
    {% if state_email_fee == "complet" or email_fee_recipients%}
      <div class="card " style="margin:0 120px 0 20px;">
        <div class="card-header">
            <h2 class="card-title">Email Fees</h2>
            <h4 class="card-description"></h4>
        </div>

        <div class="card-body"  >
            <table class="table table-bordered table-head-fixed text-wrap">
                <thead class="bg-info">
                <tr>
                    <th scope="col">Environnement</th>
                    <th scope="col">Nom de la valeur</th>
                    <th scope="col">Email</th>
                </tr>
                </thead>

                <tbody>
                  
                  {% for configs in email_fee_recipients %}
                    <tr data-toggle="modal" data-target="#EmailFeesModal" data-env="{{env}}" data-value-name="{{configs.value_name}}" data-email="{{configs.array_value}}" style="cursor: pointer;" class="trEmailFeesModal">
                      <td>{{env}}</td>
                      <td>{{configs.value_name}}</td>
                      <td>
                        <ul class="ul_list" style="display: flex;flex-wrap: wrap;padding: 1px;border-radius: 5px;">
                          {% for mail in configs.array_value %}
                            <li style="list-style: none;margin: 2px 2px;border-radius: 5px;background: #f2f2f2;padding: 5px 8px 5px 10px;border: 1px solid #e3d1e1;">{{mail}}</li>
                          {% endfor %}
                        </ul>
                      </td>
                    </tr>

                  {% endfor %}
                
                </tbody>
            </table>
        </div>
        
      </div>
    {% endif %}
    <div class="card " style="margin:70px 120px 30px 20px;width:48rem;"  id="add-email-fee-card" {% if state_email_fee != "vide" %}hidden{% endif %}>
      <div class="card-header">
          <h2 class="card-title">Email Fees Recipients</h2>
          <i class="fa fa-x" style="float: right; cursor:pointer;" aria-hidden="true" onclick="HideCard('add-email-fee-card')" {% if state_email_fee == "vide" %}hidden{% endif %}></i>
      </div>
      <div class="card-body"  >
        <div class="form-group">
            <label class="col-form-label col-4">Environnement</label>
            <input type="text" readonly value="{{env}}" class="form-control "/>
        </div>

        <div class="form-group">
            <label class="col-form-label col-4">Value Name</label>
            <select class="form-control" >
              {% for config in email_fee_value_name %}
                <option value="{{config.id}}">{{config.value_name}}</option>
              {% endfor %}
            </select>
        </div>

        <div class="multiInsertwrapper form-group">
          <label class="col-form-label col-6" >Email</label>
          <div class="multiInsertcontent" >
              <ul class="multiInsertul" >
                  <input type="text"  class="form-control" />
              </ul>
          </div>
          <div class="multiInsertdetail">
              <button type="button" class="btn btn-primary removaAllButton" >Effacer</button>
          </div>
      </div>

      </div>
      <div class="card-footer" >
        <button type="button" id="saveIt" class="btn btn-success" onclick="CreateParsing('email-fee-recipient-create','add-email-fee-card')" style="margin-top: 20px;float:right;">Ajouter</button>
      </div>
    </div>

    {% if state_email_fee_sender == "incomplet" %}
      <div class="" style="margin-bottom:1rem;">
          <a class="btn btn-outline-primary  py-0 px-2" title="Ajouter une ligne" role="button" onclick="OpenCard('add-email-fee-sender-card')">
              <i class="fa fa-pen" aria-hidden="true"></i>Ajouter une ligne</a>
      </div>
    {% endif %}

        {% if state_email_fee_sender == "complet" or state_email_fee_sender == "incomplet" %}
        <div class="card " style="margin:30px 120px 0 20px;" >
          <div class="card-header">
              <h2 class="card-title">Email Fees Sender</h2>
          </div>
          <div class="card-body" >
            <table class="table table-bordered table-head-fixed text-wrap"">
              <thead class="bg-info">
                <tr>
                <th scope="col">Environnement</th>
                <th scope="col">Nom de la valeur</th>
                <th scope="col">Email</th>
                <th scope="col">Mot de passe</th>
                <th scope="col">SMTP</th>
                <th scope="col">Port</th>
                </tr>
              </thead>

              <tbody>
                
                {% for config in email_fee_sender %}
                  <tr data-toggle="modal" data-target="#EmailFeesRequestModal" data-env="{{env}}"  data-value-name="{{config.value_name}}" data-email="{{config.dict_value.address}}" data-password="{{config.dict_value.password}}" data-smtp="{{config.dict_value.smtp}}" data-port="{{config.dict_value.port}}" style="cursor: pointer;" class="trEmailFeeSenderModal" style="font-size: 1rem !important;">
                    <td>{{env}}</td>
                    <td>{{config.value_name}}</td>
                    <td>{{config.dict_value.address}}</td>
                    <td>{{config.dict_value.password}}</td>
                    <td>{{config.dict_value.smtp}}</td>
                    <td>{{config.dict_value.port}}</td>
                  </tr>
                {% endfor %}

              </tbody>
            </table>
          </div>
        </div>                        
        {% endif %}

        <div class="card" style="margin:70px 120px 0 20px;width:48rem;"  id="add-email-fee-sender-card" {% if state_email_fee_sender != "vide" %}hidden{% endif %}>
          <div class="card-header">
          <h2 class="card-title">Email Fee Sender</h2>
          <h4 class="card-description"></h4>
          <i class="fa fa-x" style="float: right; cursor:pointer;" aria-hidden="true" onclick="HideCard('add-email-fee-sender-card')" {% if state_email_fee_sender == "vide" %}hidden{% endif %}></i>
          </div>

          <div class="card-body">
            <div class="form-group">
              <label class="col-form-label col-4">Environnement</label>
              <input type="text" readonly value="{{env}}" class="form-control "/>
            </div>

            <div class="form-group">
              <label class="col-form-label col-4">Value Name</label>
              <select class="form-control" id="value_name_email_fee_sender">
                {% for config in email_fee_sender_value_name %}
                  <option value="{{config.id}}">{{config.value_name}}</option>
                {% endfor %}
            </select>
            </div>

            <div class="form-group">
              <label class="col-form-label col-4">Email</label>
              <input type="text" name="email_fee_sender" id="email_fee_sender" class="form-control "/>
            </div>

            <div class="form-group">
              <label class="col-form-label col-4">Password</label>
              <input type="password" name="password_email_fee_sender" id="password_email_fee_sender" class="form-control "/>
              <span class="fas fa-eye" onclick="showPassword('password_email_fee_sender')"  style="cursor: pointer;"></span>
              
            </div>

            <div class="form-group">
              <label class="col-form-label col-4">SMTP</label>
              <input type="text" name="smtp_email_fee_sender" id="smtp_email_fee_sender" class="form-control "/>
            </div>

            <div class="form-group">
              <label class="col-form-label col-4">Port</label>
              <input type="number" name="port_email_fee_sender" id="port_email_fee_sender" class="form-control "/>
            </div>
          </div>
            <div class="card-footer" id="">
              <button type="button" onclick="CreateEmailFeeSender()" class="btn btn-success" style="margin-top: 20px;float:right;">Enregistrer</button>
          </div>
        </div>
        
        


<div class="modal fade" id="EmailFeesModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalPnrNotUpdatedTitle">
          <i class="fa fa-upload"></i>
          Email Fee 
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          <div>
                <label class="col-form-label col-4">Environnement</label>
                <input type="text" readonly id="modalFeesEnv" class="form-control "/>
                
            </div>

            <div class="form-group">
                <label class="col-form-label col-4">Value Name</label>
                <input type="text" readonly id="modalFeesValueName" class="form-control "/>
            </div>

            <div class="form-group">
              <label class="col-form-label col-4">Email</label>
              <div class="insertmodalwrapper">
                <label class="col-form-label col-4" id="modalLabel"></label>
                <div class="insertmodalcontent">
                    <ul class="insertmodalul fee">
                        <input type="text" id="modalInsertFee" class="form-control" />
                    </ul>
                </div>
                <div class="insertmodaldetail">
                    <button type="button" class="btn btn-primary" onclick="removeAllModal()">Effacer</button>
                </div>
              </div>
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" onclick="UpdateEmailFees()">Modifier</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="EmailFeesRequestModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalPnrNotUpdatedTitle">
          <i class="fa fa-mail"></i>
          Email Fee Request Tools
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
         <form method='POST'>
            <div class="input-group mb-3">
            <label class="col-form-label col-4">Environnement</label>
            <input type="text" readonly id="modalFeeSenderEnv" class="form-control "/>
            </div>

            <div class="input-group mb-3">
            <label class="col-form-label col-4">Value Name</label>
            <input type="text" readonly id="modalFeeSenderValueName" class="form-control "/>
            </div>

            <div class="input-group mb-3">
                <label class="col-form-label col-4">Email</label>
                <input type="text" name="email" id="modalFeeSenderEmail" class="form-control "/>
            </div>

            <div class="input-group mb-3">
                <label class="col-form-label col-4">Password</label>
                <input type="password" name="password" id="modalFeeSenderPassword" class="form-control "/>
                <span class="fas fa-eye" onclick="showPassword('modalFeeSenderPassword')"  style="cursor: pointer;margin-top:10px"></span>
                
            </div>

            <div class="input-group mb-3">
                <label class="col-form-label col-4">SMTP</label>
                <input type="text" name="smtp" id="modalFeeSenderSmtp" class="form-control "/>
            </div>

            <div class="input-group mb-3">
                <label class="col-form-label col-4">Port</label>
                <input type="number" name="port" id="modalFeeSenderPort" class="form-control "/>
            </div>

        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-success" onclick="UpdateEmailFeeSender()">Modifier</button>
      </div>
    </div>
  </div>
</div>